{"version":3,"sources":["main.js"],"names":["indexLi","$add","$","$alertName","$alertUrl","$done","$cancle","$alert","$liList","$list","hashObj","JSON","parse","localStorage","getItem","hashMap","name","url","isPC","userAgentInfo","navigator","userAgent","Agents","flag","v","length","indexOf","alertFrame","title","text","css","val","hideFrame","simplifyUrl","replace","render","i","$li","toUpperCase","insertBefore","on","e","stopPropagation","indexArr","Array","from","ul","children","hover","find","addClass","removeClass","window","open","click","parent","target","parentNode","forEach","item","index","remove","liObj","push","value","findIndex","splice","onbeforeunload","hashString","stringify","setItem","addEventListener","event","persisted"],"mappings":"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","file":"main.6797da0a.js","sourceRoot":"..\\src","sourcesContent":["let indexLi // 控制修改时的完成按钮\r\nlet $add = $('.add')\r\nlet $alertName = $('.alertName')\r\nlet $alertUrl = $('.alertUrl')\r\nlet $done = $('.done')\r\nlet $cancle = $('.cancle')\r\nlet $alert = $('.alert')\r\nlet $liList = $('.liList')\r\nlet $list = $('.list')\r\nlet hashObj = JSON.parse(localStorage.getItem('hashMap'))\r\nlet hashMap = hashObj || [{ // 用来存用户用户所收藏的网站\r\n    name: 'Vue 官网',\r\n    url: 'http://doc.vue-js.com/'\r\n}]\r\n\r\nfunction isPC() {\r\n    var userAgentInfo = navigator.userAgent;\r\n    var Agents = [\"Android\", \"iPhone\",\r\n        \"SymbianOS\", \"Windows Phone\",\r\n        \"iPad\", \"iPod\"]\r\n    var flag = true\r\n    for (var v = 0; v < Agents.length; v++) {\r\n        if (userAgentInfo.indexOf(Agents[v]) > 0) {\r\n            flag = false\r\n            break\r\n        }\r\n    }\r\n    return flag\r\n}\r\n\r\n// 控制弹框出现函数\r\nfunction alertFrame(title, name, url) {\r\n    $('.alertTitle').text(title)\r\n    $('.alertWrapper').css('display', 'block')\r\n    $alert.css('display', 'block')\r\n    $alertName.val(name || '')\r\n    $alertUrl.val(url || '')\r\n    // $liList.css('pointer-events', 'none')\r\n}\r\n\r\n// 控制弹框隐藏函数\r\nfunction hideFrame() {\r\n    $('.alertWrapper').css('display', 'none')\r\n    $('.alert').css('display', 'none')\r\n    // $liList.css('pointer-events', 'auto')\r\n}\r\n\r\nfunction simplifyUrl(url){\r\n    return url.replace('http://', '')\r\n        .replace('https://', '')\r\n        .replace('www.', '')\r\n        .replace(/\\/.*/, '')\r\n}\r\n\r\n\r\n\r\n// 增加网站, index控制hashMap列表渲染的起始位置\r\nfunction render(){\r\n    for(let i = 0; i < hashMap.length; i++){\r\n        let name = hashMap[i].name\r\n        let url = simplifyUrl(hashMap[i].url)\r\n        let $li = $(`\r\n            <li class=\"liList\">\r\n                  <div>\r\n                      <div class=\"name\">\r\n                          <p>${url[0].toUpperCase()}</p>\r\n                      </div>\r\n                      <p class=\"desc\">${name}</p>\r\n                      <p class=\"icon-menu\" title=\"修改网站\">\r\n                          <svg class=\"icon\">\r\n                              <use xlink:href=\"#icon-menu\"></use>\r\n                          </svg>\r\n                      </p>\r\n                  </div>\r\n             </li>\r\n        `).insertBefore($add)\r\n        // 点击菜单\r\n        $li.on('click', '.icon-menu', (e) =>{\r\n            e.stopPropagation()\r\n            let indexArr = Array.from(ul.children)\r\n            indexLi = indexArr.indexOf($li[0])\r\n            alertFrame('修改网站信息', name, url)\r\n        })\r\n        // PC端鼠标经过,几秒后出现菜单\r\n        $li.hover(function() {\r\n            $(this).find('.icon-menu').addClass('appear')\r\n        }, function() {\r\n            $(this).find('.icon-menu').removeClass('appear')\r\n        })\r\n        $li.on('click', () =>{\r\n            window.open(hashMap[i].url)\r\n        })\r\n    }\r\n}\r\n\r\n\r\n// JS逻辑开始\r\nrender()\r\n// 点击添加\r\n$add.click(()=>{\r\n    alertFrame('增加网站')\r\n})\r\n\r\n// 点击完成\r\n$done.click((e) =>{\r\n    let name = $alertName.val()\r\n    let url = $alertUrl.val()\r\n    let parent = $(e.target.parentNode.parentNode)\r\n    let title = parent.find('.alertTitle').text()\r\n    if(title === '修改网站信息'){\r\n        hashMap.forEach((item, index) => {\r\n            if(item.name === name && item.url === url){\r\n                hideFrame()\r\n            }else if(index === indexLi) {\r\n                item.name = name\r\n                item.url = url\r\n                $list.find('li:not(.add)').remove()\r\n                render()\r\n                hideFrame()\r\n            }\r\n        })\r\n    }else {\r\n        if(name&&url){\r\n            let liObj = {name: name, url: url}\r\n            hashMap.push(liObj)\r\n            $list.find('li:not(.add)').remove()\r\n            render()\r\n        }\r\n        hideFrame()\r\n    }\r\n\r\n})\r\n\r\n// 点击删除\r\n$alert.on('click', '.delete', (e)=>{\r\n    let value = $(e.target.parentNode.parentNode).find('.alertName').val()\r\n    let index = hashMap.findIndex((item)=>{\r\n        return item.name === value\r\n    })\r\n    if(index !== -1){\r\n        hashMap.splice(index, 1)\r\n        $list.find('li:not(.add)').remove()\r\n        render()\r\n    }\r\n    hideFrame()\r\n})\r\n\r\n// 点击取消\r\n$cancle.click(()=>{\r\n    hideFrame()\r\n})\r\n\r\n// 键盘事件\r\n\r\n// $(document).keydown((e) =>{\r\n//     if(isPC()){\r\n//         let obj =hashMap.find((item) => {\r\n//             return simplifyUrl(item.url)[0].toLowerCase() === e.key\r\n//         })\r\n//         if(obj){\r\n//             window.open(obj.url)\r\n//         }\r\n//     }\r\n// })\r\n\r\nwindow.onbeforeunload = () => {\r\n    // console.log(22222)\r\n    let hashString = JSON.stringify(hashMap) // Object(Array) --> string\r\n    localStorage.setItem('hashMap', hashString)\r\n}\r\n// console.log(JSON.stringify(hashMap))\r\n\r\n// 解决safari上,onbeforeunload失效\r\nwindow.addEventListener(\"pagehide\", event => {\r\n    if (event.persisted) {\r\n        let hashString = JSON.stringify(hashMap) // Object(Array) --> string\r\n        localStorage.setItem('hashMap', hashString)\r\n    }\r\n}, false);\r\n\r\n\r\n"]}